#!/usr/bin/env bash

# Ensure the script is sourced
if [[ "${BASH_SOURCE[0]}" == "$0" ]]; then
  echo "This script must be sourced, not executed. Exiting."
  return 1
fi

# Check if REPO_HOME is set, if not source env_base
if [ -z "$REPO_HOME" ]; then
  script_path="$(dirname "$(realpath "${BASH_SOURCE[0]}")")"
  source "${script_path}/env_base"
fi

export JAVA_HOME="$REPO_HOME/tool/jdk-11"
export GROOVY_HOME="$REPO_HOME/tool/groovy-4.0.9"

export PATH=\
"$REPO_HOME"/developer/executor\
:"$JAVA_HOME"/bin\
:"$GROOVY_HOME"/bin\
:"$PATH"

# so the .gitignore files can be seen:
alias ls="ls -a"

# Corrected line:
cd "$REPO_HOME/developer"

source "$REPO_HOME"/developer/executor/env_build

echo "${BASH_SOURCE[0]}" "complete"
